(()=>{"use strict";var e={857:(e,s,t)=>{new class{constructor(e="http://localhost:3000/api"){this.baseUrl=e}setApiKey(e){this.apiKey=e}async request(e,s={}){try{const t=`${this.baseUrl}${e}`,r={"Content-Type":"application/json",...s.headers};this.apiKey&&(r.Authorization=`Bearer ${this.apiKey}`);const i=await fetch(t,{...s,headers:r}),o=await i.json();return i.ok?{success:!0,data:o.data||o,message:o.message}:{success:!1,error:o.message||o.error||`HTTP ${i.status}`}}catch(e){return console.error("API请求失败:",e),{success:!1,error:e instanceof Error?e.message:"网络请求失败"}}}async getCurrentUser(){return this.request("/auth/me")}async login(e,s){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:s})})}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async uploadFile(e){try{const s=new FormData;s.append("file",e);const t=await fetch(`${this.baseUrl}/files/upload`,{method:"POST",headers:{...this.apiKey&&{Authorization:`Bearer ${this.apiKey}`}},body:s}),r=await t.json();return t.ok?{success:!0,data:r.data||r}:{success:!1,error:r.message||r.error||"文件上传失败"}}catch(e){return console.error("文件上传失败:",e),{success:!1,error:e instanceof Error?e.message:"文件上传失败"}}}async createSubmission(e){return this.request("/submissions",{method:"POST",body:JSON.stringify(e)})}async getSubmission(e){return this.request(`/submissions/${e}`)}async getSubmissions(e){let s="";if(e){const t=[];for(const s in e)if(e.hasOwnProperty(s)){const r=e[s];void 0!==r&&t.push(`${s}=${encodeURIComponent(String(r))}`)}s=t.length>0?"?"+t.join("&"):""}return this.request(`/submissions${s}`)}async updateSubmission(e,s){return this.request(`/submissions/${e}`,{method:"PUT",body:JSON.stringify(s)})}async processWithMyScript(e){return this.request("/ocr/myscript",{method:"POST",body:JSON.stringify({fileUploadId:e})})}async processWithDeepseek(e){return this.request("/ai/deepseek/grade",{method:"POST",body:JSON.stringify(e)})}async searchKnowledge(e){return this.request("/rag/search",{method:"POST",body:JSON.stringify({query:e})})}async askQuestion(e,s){return this.request("/rag/ask",{method:"POST",body:JSON.stringify({question:e,context:s})})}async healthCheck(){return this.request("/health")}}}},s={};function t(r){var i=s[r];if(void 0!==i)return i.exports;var o=s[r]={exports:{}};return e[r](o,o.exports,t),o.exports}t.d=(e,s)=>{for(var r in s)t.o(s,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:s[r]})},t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),t(857)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVTCxPQUFPTSxVQUFVbkMsZUFBZW9DLEtBQUtILEVBQUtDLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYWxjdWx1cy1haS1leHRlbnNpb24vLi9zcmMvY29tbW9uL3NlcnZpY2VzL2FwaS50cyIsIndlYnBhY2s6Ly9jYWxjdWx1cy1haS1leHRlbnNpb24vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vY2FsY3VsdXMtYWktZXh0ZW5zaW9uL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9jYWxjdWx1cy1haS1leHRlbnNpb24vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDlhbHnlKhBUEnmnI3liqFcbmV4cG9ydCBjbGFzcyBBcGlTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcihiYXNlVXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGknKSB7XG4gICAgICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgfVxuICAgIC8vIOiuvue9rkFQSeWvhumSpVxuICAgIHNldEFwaUtleShhcGlLZXkpIHtcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gICAgfVxuICAgIC8vIOmAmueUqOivt+axguaWueazlVxuICAgIGFzeW5jIHJlcXVlc3QoZW5kcG9pbnQsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfSR7ZW5kcG9pbnR9YDtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3RoaXMuYXBpS2V5fWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGRhdGEubWVzc2FnZSB8fCBkYXRhLmVycm9yIHx8IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfWAsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLmRhdGEgfHwgZGF0YSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQVBJ6K+35rGC5aSx6LSlOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ+e9kee7nOivt+axguWksei0pScsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIOeUqOaIt+ebuOWFs0FQSVxuICAgIGFzeW5jIGdldEN1cnJlbnRVc2VyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KCcvYXV0aC9tZScpO1xuICAgIH1cbiAgICBhc3luYyBsb2dpbihlbWFpbCwgcGFzc3dvcmQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCgnL2F1dGgvbG9naW4nLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZW1haWwsIHBhc3N3b3JkIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgcmVnaXN0ZXIodXNlckRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCgnL2F1dGgvcmVnaXN0ZXInLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVzZXJEYXRhKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIOaWh+S7tuS4iuS8oEFQSVxuICAgIGFzeW5jIHVwbG9hZEZpbGUoZmlsZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2ZpbGVzL3VwbG9hZGAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLih0aGlzLmFwaUtleSAmJiB7ICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAgfSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBmb3JtRGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGRhdGEubWVzc2FnZSB8fCBkYXRhLmVycm9yIHx8ICfmlofku7bkuIrkvKDlpLHotKUnLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YS5kYXRhIHx8IGRhdGEsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign5paH5Lu25LiK5Lyg5aSx6LSlOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ+aWh+S7tuS4iuS8oOWksei0pScsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIOaPkOS6pOebuOWFs0FQSVxuICAgIGFzeW5jIGNyZWF0ZVN1Ym1pc3Npb24oc3VibWlzc2lvbkRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCgnL3N1Ym1pc3Npb25zJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShzdWJtaXNzaW9uRGF0YSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBnZXRTdWJtaXNzaW9uKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QoYC9zdWJtaXNzaW9ucy8ke2lkfWApO1xuICAgIH1cbiAgICBhc3luYyBnZXRTdWJtaXNzaW9ucyhwYXJhbXMpIHtcbiAgICAgICAgbGV0IHF1ZXJ5U3RyaW5nID0gJyc7XG4gICAgICAgIGlmIChwYXJhbXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFydHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHBhcmFtcykge1xuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcmFtc1trZXldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlQYXJ0cy5wdXNoKGAke2tleX09JHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHZhbHVlKSl9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBxdWVyeVN0cmluZyA9IHF1ZXJ5UGFydHMubGVuZ3RoID4gMCA/ICc/JyArIHF1ZXJ5UGFydHMuam9pbignJicpIDogJyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdChgL3N1Ym1pc3Npb25zJHtxdWVyeVN0cmluZ31gKTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlU3VibWlzc2lvbihpZCwgdXBkYXRlcykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KGAvc3VibWlzc2lvbnMvJHtpZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXBkYXRlcyksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBNeVNjcmlwdCBPQ1IgQVBJXG4gICAgYXN5bmMgcHJvY2Vzc1dpdGhNeVNjcmlwdChmaWxlVXBsb2FkSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCgnL29jci9teXNjcmlwdCcsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBmaWxlVXBsb2FkSWQgfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBEZWVwc2VlayBBSSBBUElcbiAgICBhc3luYyBwcm9jZXNzV2l0aERlZXBzZWVrKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCgnL2FpL2RlZXBzZWVrL2dyYWRlJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFJBR+ebuOWFs0FQSe+8iOmihOeVme+8iVxuICAgIGFzeW5jIHNlYXJjaEtub3dsZWRnZShxdWVyeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KCcvcmFnL3NlYXJjaCcsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBxdWVyeSB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGFza1F1ZXN0aW9uKHF1ZXN0aW9uLCBjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QoJy9yYWcvYXNrJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHF1ZXN0aW9uLCBjb250ZXh0IH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8g5YGl5bq35qOA5p+lXG4gICAgYXN5bmMgaGVhbHRoQ2hlY2soKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QoJy9oZWFsdGgnKTtcbiAgICB9XG59XG4vLyDlr7zlh7rljZXkvovlrp7kvotcbmV4cG9ydCBjb25zdCBhcGlTZXJ2aWNlID0gbmV3IEFwaVNlcnZpY2UoKTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwiYmFzZVVybCIsInRoaXMiLCJzZXRBcGlLZXkiLCJhcGlLZXkiLCJyZXF1ZXN0IiwiZW5kcG9pbnQiLCJvcHRpb25zIiwidXJsIiwiaGVhZGVycyIsInJlc3BvbnNlIiwiZmV0Y2giLCJkYXRhIiwianNvbiIsIm9rIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJlcnJvciIsInN0YXR1cyIsImNvbnNvbGUiLCJFcnJvciIsImdldEN1cnJlbnRVc2VyIiwibG9naW4iLCJlbWFpbCIsInBhc3N3b3JkIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZWdpc3RlciIsInVzZXJEYXRhIiwidXBsb2FkRmlsZSIsImZpbGUiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwiY3JlYXRlU3VibWlzc2lvbiIsInN1Ym1pc3Npb25EYXRhIiwiZ2V0U3VibWlzc2lvbiIsImlkIiwiZ2V0U3VibWlzc2lvbnMiLCJwYXJhbXMiLCJxdWVyeVN0cmluZyIsInF1ZXJ5UGFydHMiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsInZhbHVlIiwidW5kZWZpbmVkIiwicHVzaCIsImVuY29kZVVSSUNvbXBvbmVudCIsIlN0cmluZyIsImxlbmd0aCIsImpvaW4iLCJ1cGRhdGVTdWJtaXNzaW9uIiwidXBkYXRlcyIsInByb2Nlc3NXaXRoTXlTY3JpcHQiLCJmaWxlVXBsb2FkSWQiLCJwcm9jZXNzV2l0aERlZXBzZWVrIiwic2VhcmNoS25vd2xlZGdlIiwicXVlcnkiLCJhc2tRdWVzdGlvbiIsInF1ZXN0aW9uIiwiY29udGV4dCIsImhlYWx0aENoZWNrIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=